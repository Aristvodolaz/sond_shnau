# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL**
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–∞—à–µ–π –ë–î (155.212.216.148:5432)
- 7 —Ç–∞–±–ª–∏—Ü: users, sessions, dogs, news, stories, memorial, adopted
- –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON

‚úÖ **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**
- –í—Ö–æ–¥/–≤—ã—Ö–æ–¥ (—Å–µ—Å—Å–∏–∏)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±–∞–∫–∞–º–∏ (CRUD)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏ (CRUD)
- –ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–π UI**
- –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (UiInput, UiTextarea, UiModal, UiLoader, UiToast)
- –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
- –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ –º–∏–∫—Ä–æ–∞–Ω–∏–º–∞—Ü–∏–∏
- –ö–∞—Å—Ç–æ–º–Ω—ã–π scrollbar

‚úÖ **API Endpoints**
- –ü—É–±–ª–∏—á–Ω—ã–µ: GET /api/dogs, GET /api/news, GET /api/rss
- –ê–¥–º–∏–Ω—Å–∫–∏–µ: –ø–æ–ª–Ω—ã–π CRUD –¥–ª—è dogs –∏ news
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ cookies

---

## üìù –®–∞–≥ –∑–∞ —à–∞–≥–æ–º

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è:**
- `pg` ‚Äî PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
- `zod` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `rss-parser` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ RSS
- –ò –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

–û—Ç–∫—Ä–æ–π—Ç–µ `server/database/config.ts` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```typescript
export const dbConfig = {
  host: '155.212.216.148',
  port: 5432,
  database: 'fond_shnau',
  user: 'my_user',
  password: '123456',
  ssl: false
}
```

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å ‚Äî –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª.

### 3. –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞

```bash
npm run dev
```

–°–∞–π—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞: http://localhost:3000

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:3000/api/init-db
```

–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
1. –°–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ PostgreSQL
2. –ü–µ—Ä–µ–Ω–µ—Å—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON —Ñ–∞–π–ª–æ–≤ (dogs.json, news.json –∏ —Ç.–¥.)
3. –°–æ–∑–¥–∞—Å—Ç –∞–¥–º–∏–Ω–∞ (login: `admin`, password: `admin123`)

**–í—ã —É–≤–∏–¥–∏—Ç–µ JSON –æ—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Database initialized successfully",
  "steps": [
    "Tables created",
    "Data migrated from JSON",
    "Admin user created (username: admin, password: admin123)"
  ]
}
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –í—ã–∑—ã–≤–∞–π—Ç–µ —ç—Ç–æ—Ç endpoint —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑! –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—ã–∑–æ–≤–µ –¥–∞–Ω–Ω—ã–µ –ù–ï –∑–∞–¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è `ON CONFLICT DO NOTHING`.

### 5. –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:3000/admin/login
2. –õ–æ–≥–∏–Ω: `admin`
3. –ü–∞—Ä–æ–ª—å: `admin123`

**–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å!**

---

## üé® –ß—Ç–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

### 1. –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Å—Å—ã–ª–∫–∏

`utils/config.ts`:
```typescript
VK_URL: 'https://vk.com/–≤–∞—à–∞_–≥—Ä—É–ø–ø–∞'
TG_URL: 'https://t.me/–≤–∞—à_–∫–∞–Ω–∞–ª'
PHONE: '+7 (XXX) XXX-XX-XX'
EMAIL: 'info@example.com'
```

### 2. –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

`tailwind.config.ts` ‚Üí —Å–µ–∫—Ü–∏—è `theme.extend.colors`:
```typescript
primary: { /* –æ—Ä–∞–Ω–∂–µ–≤—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ */ }
warm: { /* –±–µ–∂–µ–≤—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ */ }
```

### 3. –î–∞–Ω–Ω—ã–µ

–¢–µ–ø–µ—Ä—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ PostgreSQL! –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:
- http://localhost:3000/admin ‚Äî —Å–æ–±–∞–∫–∏
- http://localhost:3000/admin/news ‚Äî –Ω–æ–≤–æ—Å—Ç–∏

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### –¢–∞–±–ª–∏—Ü—ã

1. **users** ‚Äî –∞–¥–º–∏–Ω—ã
   - id, username, password, created_at

2. **sessions** ‚Äî —Å–µ—Å—Å–∏–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - id, token, user_id, expires_at, created_at

3. **dogs** ‚Äî —Å–æ–±–∞–∫–∏
   - id, slug, name, type, age, city, curator_name, curator_phone, curator_email
   - photos (JSONB), description, features (JSONB), health, character
   - forum_topic_url, status, date_added, created_at, updated_at

4. **news** ‚Äî –Ω–æ–≤–æ—Å—Ç–∏
   - id, slug, title, date, preview, content, image, published
   - created_at, updated_at

5. **stories** ‚Äî —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏
   - id, slug, dog_name, year, part, preview, content
   - photos (JSONB), before_photo, after_photo, created_at, updated_at

6. **memorial** ‚Äî –ø–∞–º—è—Ç—å
   - id, slug, name, years, type, photo, tribute, date_added, created_at

7. **adopted** ‚Äî –ø—Ä–∏—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–æ–±–∞–∫–∏
   - id, name, type, year, city, photo, adoption_date, created_at

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞

1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É
2. (–§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ)

–í—Ä–µ–º–µ–Ω–Ω–æ: –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `server/utils/auth.ts` —Ñ—É–Ω–∫—Ü–∏—é `ensureAdminUser()`, —É–¥–∞–ª–∏—Ç–µ –∑–∞–ø–∏—Å—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `users` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `npm run db:init` —Å–Ω–æ–≤–∞.

### –ü—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ bcrypt** –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π (—Å–µ–π—á–∞—Å SHA-256)
2. **–í–∫–ª—é—á–∏—Ç–µ SSL** –¥–ª—è PostgreSQL
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–∞—Ä–æ–ª–µ–π
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS** –¥–ª—è —Å–∞–π—Ç–∞
5. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ë–î** –ø–æ IP

---

## üì° API Endpoints

### –ü—É–±–ª–∏—á–Ω—ã–µ

```
GET  /api/dogs              # –í—Å–µ —Å–æ–±–∞–∫–∏
GET  /api/news              # –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
GET  /api/rss               # RSS –ª–µ–Ω—Ç–∞ (proxy)
GET  /rss.xml               # RSS XML
```

### –ê–¥–º–∏–Ω—Å–∫–∏–µ (—Ç—Ä–µ–±—É—é—Ç cookie `admin_token`)

```
POST   /api/admin/login     # –í—Ö–æ–¥
POST   /api/admin/logout    # –í—ã—Ö–æ–¥

GET    /api/admin/dogs      # –í—Å–µ —Å–æ–±–∞–∫–∏
POST   /api/admin/dogs      # –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±–∞–∫—É
PUT    /api/admin/dogs/:id  # –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–±–∞–∫—É
DELETE /api/admin/dogs/:id  # –£–¥–∞–ª–∏—Ç—å —Å–æ–±–∞–∫—É

GET    /api/admin/news      # –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏
POST   /api/admin/news      # –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
PUT    /api/admin/news/:id  # –û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
DELETE /api/admin/news/:id  # –£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
```

---

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```
Error: connect ECONNREFUSED
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `server/database/config.ts`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –∏ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç—É 5432

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

```
Error: duplicate key value violates unique constraint
```

**–†–µ—à–µ–Ω–∏–µ:**
- –î–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ –ë–î
- –£–¥–∞–ª–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `npm run db:init` —Å–Ω–æ–≤–∞
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ON CONFLICT DO NOTHING` (—É–∂–µ –µ—Å—Ç—å –≤ –∫–æ–¥–µ)

### –ù–µ –º–æ–≥—É –≤–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ (`npm run db:init`)
2. –õ–æ–≥–∏–Ω: `admin`, –ø–∞—Ä–æ–ª—å: `admin123`
3. Cookies –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã
4. –°–µ—Å—Å–∏—è –Ω–µ –∏—Å—Ç–µ–∫–ª–∞ (7 –¥–Ω–µ–π)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ:
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å CRUD
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI
- ‚úÖ RSS –ª–µ–Ω—Ç–∞
- ‚úÖ –í—Å–µ —Ä–∞–∑–¥–µ–ª—ã —Å–∞–π—Ç–∞

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:**
```bash
npm install          # –û–¥–∏–Ω —Ä–∞–∑
npm run dev          # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```

**–ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
```
http://localhost:3000/api/init-db  # –û–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
```

**–ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**
- **–°–∞–π—Ç:** http://localhost:3000
- **–ê–¥–º–∏–Ω–∫–∞:** http://localhost:3000/admin/login (admin / admin123)

–ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã! üêï‚ú®
