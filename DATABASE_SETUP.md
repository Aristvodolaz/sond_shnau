# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
- **Host:** 155.212.216.148
- **Port:** 5432
- **Database:** fond_shnau
- **User:** my_user
- **Password:** 123456

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `server/database/config.ts`.

## –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install
```

–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç:
- `pg` ‚Äî PostgreSQL –∫–ª–∏–µ–Ω—Ç
- `zod` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
npm run db:init
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ PostgreSQL
- –°–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- –ü–µ—Ä–µ–Ω–µ—Å—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON —Ñ–∞–π–ª–æ–≤ –≤ –ë–î
- –°–æ–∑–¥–∞—Å—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∞

**–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∞:**
- –õ–æ–≥–∏–Ω: `admin`
- –ü–∞—Ä–æ–ª—å: `admin123`

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å!

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### –¢–∞–±–ª–∏—Ü—ã

1. **users** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–¥–º–∏–Ω–∫–∏
2. **sessions** ‚Äî —Å–µ—Å—Å–∏–∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. **dogs** ‚Äî —Å–æ–±–∞–∫–∏ –Ω–∞ –ø—Ä–∏—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
4. **news** ‚Äî –Ω–æ–≤–æ—Å—Ç–∏ —Ñ–æ–Ω–¥–∞
5. **stories** ‚Äî —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏
6. **memorial** ‚Äî –ø–∞–º—è—Ç—å –æ–± —É—à–µ–¥—à–∏—Ö —Å–æ–±–∞–∫–∞—Ö
7. **adopted** ‚Äî –ø—Ä–∏—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–æ–±–∞–∫–∏

## –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ

–ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `npm run dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:3000/admin/login
3. –í–æ–π–¥–∏—Ç–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
4. –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

## API Endpoints

### –ü—É–±–ª–∏—á–Ω—ã–µ

- `GET /api/dogs` ‚Äî —Å–ø–∏—Å–æ–∫ —Å–æ–±–∞–∫
- `GET /api/news` ‚Äî —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π (—Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ)
- `GET /api/rss` ‚Äî RSS –ª–µ–Ω—Ç–∞
- `GET /rss.xml` ‚Äî RSS XML

### –ê–¥–º–∏–Ω—Å–∫–∏–µ (—Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)

**–°–æ–±–∞–∫–∏:**
- `GET /api/admin/dogs` ‚Äî –≤—Å–µ —Å–æ–±–∞–∫–∏
- `POST /api/admin/dogs` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–±–∞–∫—É
- `PUT /api/admin/dogs/:id` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ–±–∞–∫—É
- `DELETE /api/admin/dogs/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å —Å–æ–±–∞–∫—É

**–ù–æ–≤–æ—Å—Ç–∏:**
- `GET /api/admin/news` ‚Äî –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏
- `POST /api/admin/news` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
- `PUT /api/admin/news/:id` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
- `DELETE /api/admin/news/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- `POST /api/admin/login` ‚Äî –≤—Ö–æ–¥
- `POST /api/admin/logout` ‚Äî –≤—ã—Ö–æ–¥

## –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å JSON —Ñ–∞–π–ª—ã —Å –¥–∞–Ω–Ω—ã–º–∏, –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–µ—Å—É—Ç—Å—è –≤ –ë–î –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `npm run db:init`.

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å JSON —Ñ–∞–π–ª—ã –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é.

## –ë—ç–∫–∞–ø –ë–î

–§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `data/database.db`.

–î–ª—è –±—ç–∫–∞–ø–∞ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª:

```bash
cp data/database.db data/database.backup.db
```

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `server/database/db.ts`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ `CREATE TABLE` –∑–∞–ø—Ä–æ—Å—ã
3. –£–¥–∞–ª–∏—Ç–µ `data/database.db`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run db:init` —Å–Ω–æ–≤–∞

## –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è –∞–¥–º–∏–Ω–∞

–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ –∫–æ–¥):

1. –û—Ç–∫—Ä–æ–π—Ç–µ `server/utils/auth.ts`
2. –í —Ñ—É–Ω–∫—Ü–∏–∏ `ensureAdminUser()` –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å
3. –£–¥–∞–ª–∏—Ç–µ `data/database.db`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run db:init`

–õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ –∞–¥–º–∏–Ω–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è.

## Troubleshooting

**–û—à–∏–±–∫–∞: "database is locked"**
- –ó–∞–∫—Ä–æ–π—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –ë–î
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

**–û—à–∏–±–∫–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ JSON**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç JSON —Ñ–∞–π–ª–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ required –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

**–ù–µ –º–æ–≥—É –≤–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ë–î –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å
- –û—á–∏—Å—Ç–∏—Ç–µ cookies –±—Ä–∞—É–∑–µ—Ä–∞
